## 目标

* 在站内页面直接展示外部新闻搜索结果，不跳转也不嵌入 iframe。

* 保持用户体验与当前详情页按钮一致：点击后进入站内搜索结果页，呈现真实的外部新闻卡片列表。

## 方案概述

* 使用官方搜索接口（推荐：Microsoft Bing Web Search API 或 Bing News Search API）。

* 由服务端（Next.js App Router 的 route handler）调用外部 API，前端只请求站内接口，避免暴露密钥。

* 结果以卡片列表（标题、摘要、来源域名、发布时间）呈现，点击在新标签页打开原文。

## 技术实现

* 环境变量

  * 添加 BING\_API\_KEY、BING\_ENDPOINT（如 <https://api.bing.microsoft.com/v7.0/news/search）。>

  * 仅在服务端使用（process.env），禁止出现在客户端 bundle。

* 服务端接口

  * 新建 app/api/search/web/route.ts：

    * GET /api/search/web?q=关键词\&type=news

    * 读取 q，调用 Bing News Search（或 Web Search）返回 JSON。

    * 统一结果结构：{ title, snippet, url, source, publishedAt }，去重、过滤低质量。

    * 安全与鲁棒：超时、错误码、限流（简单令牌桶/每 IP 限频）、缓存（短期 5-10 分钟）。 

* 前端页面

  * 改造 /search/web：

    * 通过 fetch('/api/search/web?q=...') 获取并渲染卡片列表。

    * 状态处理：加载动画、空结果提示、错误重试；“在新标签页打开原文”外链。

    * 仅保留 Bing（符合你的最新选择），顶部显示“搜索引擎：Bing”。

* 详情页按钮

  * 已指向 /search/web?q=…；保持当前尺寸与位置规则（不独行、贴末尾）。

## 结果呈现

* 卡片信息：

  * 标题（高亮关键词，可选择前端简单高亮）

  * 摘要/片段（snippet）

  * 来源域（例如 nytimes.com）、发布时间（相对时间）

  * 操作：在新标签页打开原文 → 避免 iframe 限制及 CSP 问题

* 排序与过滤：优先最新与高相关性；过滤重复链接、非新闻页面。

## 合规与风控

* 使用官方 API，遵守服务条款，避免未经授权抓取或绕过限制。

* 服务端存储仅短期缓存；不长期保存受版权保护的全文。

* 对失败场景提供降级：提示“外部结果暂不可用”，并提供外链搜索按钮。

## 性能与体验

* 接口响应设置合理超时（3-5s）；超时回退至外链方案。

* 结果分页或“加载更多”；每页 \~10 条。

* 轻量骨架屏与渐进加载，维持页面流畅。

## 可观测性

* 记录最小化日志：查询词、结果条数、错误码；不记录用户隐私数据。

* 简单监控接口可用性与限流触发频次。

## 验证计划

* 单元：模拟 API 响应，验证映射、去重、排序。

* 集成：本地 .env 设置测试真实调用（或用 Mock 端点）。

* UI：空结果、错误、正常三态；关键词高亮；按钮与无独行规则。

## 后续可拓展

* 增加站内内容与外部内容的混合搜索（优先站内，再补外部）。

* 提供来源过滤（媒体/地区）、时间范围筛选。

* 加入“相关话题”聚合卡片（按实体或关键词）。

是否按此方案执行？确认后我将：

1. 新建服务端接口 /api/search/web；
2. 配置 .env 并在代码中接入 Bing；
3. 改造 /search/web 页面以渲染 API 结果；
4. 完整测试并交付。

