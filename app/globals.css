@import "tailwindcss";

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-border: var(--border);
  --color-card: var(--card-bg);
  --color-card-foreground: var(--card-fg);

  --font-sans: var(--font-geist-sans), system-ui, -apple-system, sans-serif;
  --font-mono: var(--font-geist-mono), ui-monospace, monospace;

  --shadow-premium: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
  --shadow-premium-hover: 0 20px 40px -15px rgba(0, 0, 0, 0.15);
}

:root {
  /* Light Theme - Modern & Clean */
  --background: oklch(0.99 0.005 240);
  --foreground: oklch(0.25 0.02 240);
  --accent: oklch(0.55 0.18 250);
  --muted: oklch(0.6 0.02 240);
  --border: oklch(0.9 0.02 240 / 0.8);
  --card-bg: oklch(1 0 0);
  --card-fg: oklch(0.25 0.02 240);
  --header-height: 72px;
}

[data-theme="dark"] {
  /* Dark Theme - Deep & Sophisticated (Improved Contrast) */
  --background: oklch(0.1 0.02 250);
  --foreground: oklch(0.92 0.01 250);
  --accent: oklch(0.7 0.12 210);
  --muted: oklch(0.55 0.02 250);
  --border: oklch(0.3 0.02 250 / 0.8);
  --card-bg: oklch(0.18 0.03 250);
  --card-fg: oklch(0.92 0.01 250);
}

@layer base {
  * {
    @apply border-border outline-accent/20;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased selection:bg-accent/20 selection:text-accent transition-colors duration-300;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  a {
    @apply transition-all duration-200 hover:text-accent;
  }
}

@layer components {
  .site-container {
    @apply max-w-6xl mx-auto px-6 w-full;
  }

  .premium-card {
    @apply bg-card text-card-foreground border border-border rounded-2xl overflow-hidden shadow-premium transition-all duration-300 hover:shadow-premium-hover hover:-translate-y-1;
  }

  .glass-header {
    @apply sticky top-0 z-50 w-full backdrop-blur-xl border-b border-border bg-background/70;
  }

  .nav-link {
    @apply text-sm font-medium text-muted hover:text-foreground transition-colors relative py-1 after:absolute after:bottom-0 after:left-0 after:h-px after:w-0 after:bg-accent after:transition-all hover:after:w-full;
  }

  .nav-link.active {
    @apply text-foreground after:w-full;
  }

  .prose {
    @apply text-lg leading-relaxed text-foreground/90;

    h1,
    h2,
    h3 {
      @apply font-bold text-foreground mt-12 mb-6 tracking-tight;
    }

    h1 {
      @apply text-4xl;
    }

    h2 {
      @apply text-2xl;
    }

    p {
      @apply mb-6;
    }

    a {
      @apply text-accent underline underline-offset-4 decoration-accent/30 hover:decoration-accent;
    }

    blockquote {
      @apply border-l-4 border-accent bg-accent/5 py-4 px-6 rounded-r-xl italic my-8;
    }

    pre {
      @apply bg-card border border-border rounded-xl p-4 overflow-x-auto my-8 font-mono text-sm;
    }

    code {
      @apply bg-accent/10 text-accent px-1.5 py-0.5 rounded font-mono text-sm;
    }
  }

  /* Scoped spacing for news detail */
  .prose.prose-news p,
  .prose.prose-news li {
    @apply leading-[2.2];
  }
  .prose.prose-news li {
    @apply mb-2;
  }

  .btn-primary {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-full bg-accent text-white font-medium transition-all hover:brightness-110 active:scale-95 shadow-lg shadow-accent/20;
  }
}

/* News item rainbow background */
.news-item-gradient {
  background: linear-gradient(
    90deg,
    hsl(var(--news-h) var(--news-s) var(--news-l1)),
    hsl(calc(var(--news-h) + 25) var(--news-s) var(--news-l2))
  );
}
:root .news-item-gradient {
  --news-s: 45%;
  --news-l1: 96%;
  --news-l2: 95%;
}
[data-theme="dark"] .news-item-gradient {
  --news-s: 30%;
  --news-l1: 20%;
  --news-l2: 18%;
}
/* Theme Switching Smoothness */
html.theme-transition * {
  transition: background-color 0.5s ease-in-out, border-color 0.5s ease-in-out, color 0.3s ease-in-out, box-shadow 0.3s ease-in-out !important;
}

/* Animations from previous version preserved but tuned */
@keyframes themePushDown {
  from {
    transform: translateY(0%);
    opacity: 0.1;
  }

  to {
    transform: translateY(100%);
    opacity: 0;
  }
}

@keyframes themePushUp {
  from {
    transform: translateY(0%);
    opacity: 0.1;
  }

  to {
    transform: translateY(-100%);
    opacity: 0;
  }
}
